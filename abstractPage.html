<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Abstract Page</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link href="http://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link rel="stylesheet" href ="css/abstractPage.css">
	<script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container-fluid col-xs-10 col-xs-offset-1">
		<div class="header" id="headerDiv">
			<h1 id="title">Abstract for *Title*</h1>

		</div>

		<div class="content">
			<h4 id="abstractContent"></h4>

			<button class="btn" id="buttondownload">Download as PDF </button>
		</div>
	</div>
	<script type="text/javascript">

		$(document).ready(function(){
				
			var pageTitle = "Blank";

		  	var request = $.ajax({
				url: "GetCurrentTitle.php",
				type: "GET",
				dataType: "text"
			});
			request.done(function(msg) {
				console.log("Title: " + msg);
				pageTitle = msg;
				document.getElementById("title").innerHTML = pageTitle;
				getAbstract(pageTitle);
			});

			function getAbstract(title){
				$.ajax({
			      url: "http://ieeexplore.ieee.org/gateway/ipsSearch.jsp?ti="+ title,
			      dataType: "xml",
			      success: function( response ) {
			        var abstract = response.getElementsByTagName("document")[0].getElementsByTagName("abstract")[0]["textContent"];
			        console.log("abstract is: " + abstract);

			        var newAbstract = abstract.split("the").join('<span class="highlight">' + "the" + '</span>');
			        document.getElementById('abstractContent').innerHTML = newAbstract;
			        
			      },
			      error: function(xhr, error){
			      	// alert(error + xhr);
			      }
		    	});
			}


			
	  	});
	</script>
</body>